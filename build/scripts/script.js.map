{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/scripts/puzzle.js","src/scripts/script.js"],"names":[],"mappings":"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","file":"script.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","let numRows;\nlet numCols;\nlet numCells;\n\nlet container;\nlet cells = [];\nlet adjacents = [];\nlet blankCell;\n\nlet startSolved;\n\n// UTILS:\n// shuffle children - better than usual method:\n// https://medium.com/@nitinpatel_20236/how-to-shuffle-correctly-shuffle-an-array-in-javascript-15ea3f84bfb\nconst shuffle = (array) => {\n  for (let i = array.length - 1; i > 0; i -= 1) {\n    const j = Math.floor(Math.random() * i);\n    const temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n  return array;\n};\n// create element from html string\nconst strToElement = (htmlStr) => {\n  const template = document.createElement(\"template\");\n  template.innerHTML = htmlStr;\n  return template.content.firstElementChild;\n};\n\nconst createElements = function () {\n  let cellNumber = 0;\n\n  for (let i = 0; i < numRows; i += 1) {\n    for (let j = 0; j < numCols; j += 1) {\n      cellNumber += 1;\n      \n      const isBlank = cellNumber === numCells;\n\n      const cell = strToElement(\n        `<button\n          ${isBlank ? 'class=\"blank\"' : \"\"}\n          tabindex=\"-1\"\n        >${isBlank ? \"(blank)\" : cellNumber}</button>`\n      );\n\n      cell.origIndex = cellNumber - 1;\n\n      cells.push(cell);\n      if (isBlank) blankCell = cell;\n    }\n  }\n\n  // shuffle cells and append as children to our container\n  container = strToElement(\n    `<div data-rows=\"${numRows}\" data-cols=\"${numCols}\"></div>`\n  );\n\n  if (!startSolved) shuffle(cells);\n  cells.forEach((cell) => container.appendChild(cell));\n};\n\n\nconst addElements = function () {\n  createElements();\n  document.body.appendChild(container);\n};\n\nconst cellsInSequence = function() {\n  return cells.every(cell => cells.indexOf(cell) === cell.origIndex);\n};\n\n// math utils for position...\nconst rowNum = i => Math.ceil((i + 1) / numCols);\nconst colNum = i => (i % numCols) + 1;\nconst getAdjacentCells = function() {\n  const adjacentInds = [];\n  const i = cells.indexOf(blankCell);\n\n  const row = rowNum(i);\n  if (row !== 1) adjacentInds.push(i - numCols); // cell above if not first row\n  if (row !== numRows) adjacentInds.push(i + numCols); // cell below if not last row\n  \n  const col = colNum(i);\n  if (col !== 1) adjacentInds.push(i - 1); // cell before if not first col\n  if (col !== numCols) adjacentInds.push(i + 1); // cell after if not last col\n\n  adjacents = adjacentInds.map(ai => cells[ai]);\n};\n\nconst isSolved = function() {\n  document.documentElement.classList.toggle('is-solved', cellsInSequence());\n};\n\nconst swapElements = function(obj1, obj2) {\n  // taken from https://stackoverflow.com/questions/10716986/swap-two-html-elements-and-preserve-event-listeners-on-them/10717422#10717422 to save time:\n  var parent2 = obj2.parentNode;\n  var next2 = obj2.nextSibling;\n  if (next2 === obj1) {\n      parent2.insertBefore(obj1, obj2);\n  } else {\n      obj1.parentNode.insertBefore(obj2, obj1);\n      if (next2) {\n          parent2.insertBefore(obj1, next2);\n      } else {\n          parent2.appendChild(obj1);\n      }\n  }\n\n  cells = Array.from(obj2.parentNode.children);\n  isSolved();\n}\n\nconst adjacentsOn = function() {\n  console.log('adjacentsOn', getAdjacentCells(), adjacents);\n  adjacents.forEach(cell => {\n    cell.addEventListener('click', onCellClick, false);\n    cell.classList.add('adjacent');\n    cell.tabIndex = 0;\n  });\n  isSolved();\n};\n\nconst adjacentsOff = function() {\n  console.log('adjacentsOff', adjacents);\n  adjacents.forEach(cell => {\n    cell.removeEventListener('click', onCellClick, false);\n    cell.classList.remove('adjacent');\n    cell.tabIndex = -1;\n  });\n};\n\nconst onCellClick = function(event) {\n  adjacentsOff();\n  swapElements(event.target, blankCell);\n  adjacentsOn();\n};\n\nconst init = function (rows, cols, solved) {\n  numRows = rows;\n  numCols = cols;\n  numCells = rows * cols;\n  startSolved = solved;\n\n  addElements();\n  adjacentsOn();\n};\n\nexport default init;\n","import puzzle from \"./puzzle\";\n\nconst init = function () {\n  puzzle(4, 4, false);\n  // supports 2->4 cols/rows\n  // -> danger - small numbers might make some sequences impossible to arrange to\n  // last argument = 'startSolved' boolean\n};\n\ninit();\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9wdXp6bGUuanMiLCJzcmMvc2NyaXB0cy9zY3JpcHQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUNBQSxJQUFJLE9BQUo7QUFDQSxJQUFJLE9BQUo7QUFDQSxJQUFJLFFBQUo7QUFFQSxJQUFJLFNBQUo7QUFDQSxJQUFJLEtBQUssR0FBRyxFQUFaO0FBQ0EsSUFBSSxTQUFTLEdBQUcsRUFBaEI7QUFDQSxJQUFJLFNBQUo7QUFFQSxJQUFJLFdBQUosQyxDQUVBO0FBQ0E7QUFDQTs7QUFDQSxJQUFNLE9BQU8sR0FBRyxTQUFWLE9BQVUsQ0FBQyxLQUFELEVBQVc7QUFDekIsT0FBSyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTixHQUFlLENBQTVCLEVBQStCLENBQUMsR0FBRyxDQUFuQyxFQUFzQyxDQUFDLElBQUksQ0FBM0MsRUFBOEM7QUFDNUMsUUFBTSxDQUFDLEdBQUcsSUFBSSxDQUFDLEtBQUwsQ0FBVyxJQUFJLENBQUMsTUFBTCxLQUFnQixDQUEzQixDQUFWO0FBQ0EsUUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLENBQUQsQ0FBbEI7QUFDQSxJQUFBLEtBQUssQ0FBQyxDQUFELENBQUwsR0FBVyxLQUFLLENBQUMsQ0FBRCxDQUFoQjtBQUNBLElBQUEsS0FBSyxDQUFDLENBQUQsQ0FBTCxHQUFXLElBQVg7QUFDRDs7QUFDRCxTQUFPLEtBQVA7QUFDRCxDQVJELEMsQ0FTQTs7O0FBQ0EsSUFBTSxZQUFZLEdBQUcsU0FBZixZQUFlLENBQUMsT0FBRCxFQUFhO0FBQ2hDLE1BQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLFVBQXZCLENBQWpCO0FBQ0EsRUFBQSxRQUFRLENBQUMsU0FBVCxHQUFxQixPQUFyQjtBQUNBLFNBQU8sUUFBUSxDQUFDLE9BQVQsQ0FBaUIsaUJBQXhCO0FBQ0QsQ0FKRDs7QUFNQSxJQUFNLGNB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Q0FMRDs7QUFPQSxJQUFJIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwibGV0IG51bVJvd3M7XG5sZXQgbnVtQ29scztcbmxldCBudW1DZWxscztcblxubGV0IGNvbnRhaW5lcjtcbmxldCBjZWxscyA9IFtdO1xubGV0IGFkamFjZW50cyA9IFtdO1xubGV0IGJsYW5rQ2VsbDtcblxubGV0IHN0YXJ0U29sdmVkO1xuXG4vLyBVVElMUzpcbi8vIHNodWZmbGUgY2hpbGRyZW4gLSBiZXR0ZXIgdGhhbiB1c3VhbCBtZXRob2Q6XG4vLyBodHRwczovL21lZGl1bS5jb20vQG5pdGlucGF0ZWxfMjAyMzYvaG93LXRvLXNodWZmbGUtY29ycmVjdGx5LXNodWZmbGUtYW4tYXJyYXktaW4tamF2YXNjcmlwdC0xNWVhM2Y4NGJmYlxuY29uc3Qgc2h1ZmZsZSA9IChhcnJheSkgPT4ge1xuICBmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGkgLT0gMSkge1xuICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBpKTtcbiAgICBjb25zdCB0ZW1wID0gYXJyYXlbaV07XG4gICAgYXJyYXlbaV0gPSBhcnJheVtqXTtcbiAgICBhcnJheVtqXSA9IHRlbXA7XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufTtcbi8vIGNyZWF0ZSBlbGVtZW50IGZyb20gaHRtbCBzdHJpbmdcbmNvbnN0IHN0clRvRWxlbWVudCA9IChodG1sU3RyKSA9PiB7XG4gIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sU3RyO1xuICByZXR1cm4gdGVtcGxhdGUuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcbn07XG5cbmNvbnN0IGNyZWF0ZUVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICBsZXQgY2VsbE51bWJlciA9IDA7XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Sb3dzOyBpICs9IDEpIHtcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IG51bUNvbHM7IGogKz0gMSkge1xuICAgICAgY2VsbE51bWJlciArPSAxO1xuICAgICAgXG4gICAgICBjb25zdCBpc0JsYW5rID0gY2VsbE51bWJlciA9PT0gbnVtQ2VsbHM7XG5cbiAgICAgIGNvbnN0IGNlbGwgPSBzdHJUb0VsZW1lbnQoXG4gICAgICAgIGA8YnV0dG9uXG4gICAgICAgICAgJHtpc0JsYW5rID8gJ2NsYXNzPVwiYmxhbmtcIicgOiBcIlwifVxuICAgICAgICAgIHRhYmluZGV4PVwiLTFcIlxuICAgICAgICA+JHtpc0JsYW5rID8gXCIoYmxhbmspXCIgOiBjZWxsTnVtYmVyfTwvYnV0dG9uPmBcbiAgICAgICk7XG5cbiAgICAgIGNlbGwub3JpZ0luZGV4ID0gY2VsbE51bWJlciAtIDE7XG5cbiAgICAgIGNlbGxzLnB1c2goY2VsbCk7XG4gICAgICBpZiAoaXNCbGFuaykgYmxhbmtDZWxsID0gY2VsbDtcbiAgICB9XG4gIH1cblxuICAvLyBzaHVmZmxlIGNlbGxzIGFuZCBhcHBlbmQgYXMgY2hpbGRyZW4gdG8gb3VyIGNvbnRhaW5lclxuICBjb250YWluZXIgPSBzdHJUb0VsZW1lbnQoXG4gICAgYDxkaXYgZGF0YS1yb3dzPVwiJHtudW1Sb3dzfVwiIGRhdGEtY29scz1cIiR7bnVtQ29sc31cIj48L2Rpdj5gXG4gICk7XG5cbiAgaWYgKCFzdGFydFNvbHZlZCkgc2h1ZmZsZShjZWxscyk7XG4gIGNlbGxzLmZvckVhY2goKGNlbGwpID0+IGNvbnRhaW5lci5hcHBlbmRDaGlsZChjZWxsKSk7XG59O1xuXG5cbmNvbnN0IGFkZEVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICBjcmVhdGVFbGVtZW50cygpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG59O1xuXG5jb25zdCBjZWxsc0luU2VxdWVuY2UgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGNlbGxzLmV2ZXJ5KGNlbGwgPT4gY2VsbHMuaW5kZXhPZihjZWxsKSA9PT0gY2VsbC5vcmlnSW5kZXgpO1xufTtcblxuLy8gbWF0aCB1dGlscyBmb3IgcG9zaXRpb24uLi5cbmNvbnN0IHJvd051bSA9IGkgPT4gTWF0aC5jZWlsKChpICsgMSkgLyBudW1Db2xzKTtcbmNvbnN0IGNvbE51bSA9IGkgPT4gKGkgJSBudW1Db2xzKSArIDE7XG5jb25zdCBnZXRBZGphY2VudENlbGxzID0gZnVuY3Rpb24oKSB7XG4gIGNvbnN0IGFkamFjZW50SW5kcyA9IFtdO1xuICBjb25zdCBpID0gY2VsbHMuaW5kZXhPZihibGFua0NlbGwpO1xuXG4gIGNvbnN0IHJvdyA9IHJvd051bShpKTtcbiAgaWYgKHJvdyAhPT0gMSkgYWRqYWNlbnRJbmRzLnB1c2goaSAtIG51bUNvbHMpOyAvLyBjZWxsIGFib3ZlIGlmIG5vdCBmaXJzdCByb3dcbiAgaWYgKHJvdyAhPT0gbnVtUm93cykgYWRqYWNlbnRJbmRzLnB1c2goaSArIG51bUNvbHMpOyAvLyBjZWxsIGJlbG93IGlmIG5vdCBsYXN0IHJvd1xuICBcbiAgY29uc3QgY29sID0gY29sTnVtKGkpO1xuICBpZiAoY29sICE9PSAxKSBhZGphY2VudEluZHMucHVzaChpIC0gMSk7IC8vIGNlbGwgYmVmb3JlIGlmIG5vdCBmaXJzdCBjb2xcbiAgaWYgKGNvbCAhPT0gbnVtQ29scykgYWRqYWNlbnRJbmRzLnB1c2goaSArIDEpOyAvLyBjZWxsIGFmdGVyIGlmIG5vdCBsYXN0IGNvbFxuXG4gIGFkamFjZW50cyA9IGFkamFjZW50SW5kcy5tYXAoYWkgPT4gY2VsbHNbYWldKTtcbn07XG5cbmNvbnN0IGlzU29sdmVkID0gZnVuY3Rpb24oKSB7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdpcy1zb2x2ZWQnLCBjZWxsc0luU2VxdWVuY2UoKSk7XG59O1xuXG5jb25zdCBzd2FwRWxlbWVudHMgPSBmdW5jdGlvbihvYmoxLCBvYmoyKSB7XG4gIC8vIHRha2VuIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA3MTY5ODYvc3dhcC10d28taHRtbC1lbGVtZW50cy1hbmQtcHJlc2VydmUtZXZlbnQtbGlzdGVuZXJzLW9uLXRoZW0vMTA3MTc0MjIjMTA3MTc0MjIgdG8gc2F2ZSB0aW1lOlxuICB2YXIgcGFyZW50MiA9IG9iajIucGFyZW50Tm9kZTtcbiAgdmFyIG5leHQyID0gb2JqMi5uZXh0U2libGluZztcbiAgaWYgKG5leHQyID09PSBvYmoxKSB7XG4gICAgICBwYXJlbnQyLmluc2VydEJlZm9yZShvYmoxLCBvYmoyKTtcbiAgfSBlbHNlIHtcbiAgICAgIG9iajEucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUob2JqMiwgb2JqMSk7XG4gICAgICBpZiAobmV4dDIpIHtcbiAgICAgICAgICBwYXJlbnQyLmluc2VydEJlZm9yZShvYmoxLCBuZXh0Mik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhcmVudDIuYXBwZW5kQ2hpbGQob2JqMSk7XG4gICAgICB9XG4gIH1cblxuICBjZWxscyA9IEFycmF5LmZyb20ob2JqMi5wYXJlbnROb2RlLmNoaWxkcmVuKTtcbiAgaXNTb2x2ZWQoKTtcbn1cblxuY29uc3QgYWRqYWNlbnRzT24gPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJ2FkamFjZW50c09uJywgZ2V0QWRqYWNlbnRDZWxscygpLCBhZGphY2VudHMpO1xuICBhZGphY2VudHMuZm9yRWFjaChjZWxsID0+IHtcbiAgICBjZWxsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DZWxsQ2xpY2ssIGZhbHNlKTtcbiAgICBjZWxsLmNsYXNzTGlzdC5hZGQoJ2FkamFjZW50Jyk7XG4gICAgY2VsbC50YWJJbmRleCA9IDA7XG4gIH0pO1xuICBpc1NvbHZlZCgpO1xufTtcblxuY29uc3QgYWRqYWNlbnRzT2ZmID0gZnVuY3Rpb24oKSB7XG4gIGNvbnNvbGUubG9nKCdhZGphY2VudHNPZmYnLCBhZGphY2VudHMpO1xuICBhZGphY2VudHMuZm9yRWFjaChjZWxsID0+IHtcbiAgICBjZWxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DZWxsQ2xpY2ssIGZhbHNlKTtcbiAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoJ2FkamFjZW50Jyk7XG4gICAgY2VsbC50YWJJbmRleCA9IC0xO1xuICB9KTtcbn07XG5cbmNvbnN0IG9uQ2VsbENsaWNrID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgYWRqYWNlbnRzT2ZmKCk7XG4gIHN3YXBFbGVtZW50cyhldmVudC50YXJnZXQsIGJsYW5rQ2VsbCk7XG4gIGFkamFjZW50c09uKCk7XG59O1xuXG5jb25zdCBpbml0ID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHNvbHZlZCkge1xuICBudW1Sb3dzID0gcm93cztcbiAgbnVtQ29scyA9IGNvbHM7XG4gIG51bUNlbGxzID0gcm93cyAqIGNvbHM7XG4gIHN0YXJ0U29sdmVkID0gc29sdmVkO1xuXG4gIGFkZEVsZW1lbnRzKCk7XG4gIGFkamFjZW50c09uKCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBpbml0O1xuIiwiaW1wb3J0IHB1enpsZSBmcm9tIFwiLi9wdXp6bGVcIjtcblxuY29uc3QgaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgcHV6emxlKDQsIDQsIGZhbHNlKTtcbiAgLy8gc3VwcG9ydHMgMi0+NCBjb2xzL3Jvd3NcbiAgLy8gLT4gZGFuZ2VyIC0gc21hbGwgbnVtYmVycyBtaWdodCBtYWtlIHNvbWUgc2VxdWVuY2VzIGltcG9zc2libGUgdG8gYXJyYW5nZSB0b1xuICAvLyBsYXN0IGFyZ3VtZW50ID0gJ3N0YXJ0U29sdmVkJyBib29sZWFuXG59O1xuXG5pbml0KCk7XG4iXX0="}