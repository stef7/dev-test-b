{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/scripts/puzzle.js","src/scripts/script.js"],"names":[],"mappings":"AAAA;;;;;;;ACAA,IAAI,OAAJ;AACA,IAAI,OAAJ;AACA,IAAI,QAAJ;AAEA,IAAI,SAAJ;AACA,IAAI,KAAK,GAAG,EAAZ;AACA,IAAI,SAAS,GAAG,EAAhB;AACA,IAAI,SAAJ;AAEA,IAAI,WAAJ,C,CAEA;AACA;;AACA,IAAM,GAAG,GAAG,SAAN,GAAM,CAAC,MAAD;AAAA,SAAY,KAAK,CAAC,IAAN,CAAW;AAAE,IAAA,MAAM,EAAN;AAAF,GAAX,CAAZ;AAAA,CAAZ,C,CAEA;AACA;;;AACA,IAAM,OAAO,GAAG,SAAV,OAAU,CAAC,KAAD,EAAW;AACzB,OAAK,IAAI,CAAC,GAAG,KAAK,CAAC,MAAN,GAAe,CAA5B,EAA+B,CAAC,GAAG,CAAnC,EAAsC,CAAC,IAAI,CAA3C,EAA8C;AAC5C,QAAM,CAAC,GAAG,IAAI,CAAC,KAAL,CAAW,IAAI,CAAC,MAAL,KAAgB,CAA3B,CAAV;AACA,QAAM,IAAI,GAAG,KAAK,CAAC,CAAD,CAAlB;AACA,IAAA,KAAK,CAAC,CAAD,CAAL,GAAW,KAAK,CAAC,CAAD,CAAhB;AACA,IAAA,KAAK,CAAC,CAAD,CAAL,GAAW,IAAX;AACD;;AACD,SAAO,KAAP;AACD,CARD,C,CASA;;;AACA,IAAM,YAAY,GAAG,SAAf,YAAe,CAAC,OAAD,EAAa;AAChC,MAAM,QAAQ,GAAG,QAAQ,CAAC,aAAT,CAAuB,UAAvB,CAAjB;AACA,EAAA,QAAQ,CAAC,SAAT,GAAqB,OAArB;AACA,SAAO,QAAQ,CAAC,OAAT,CAAiB,iBAAxB;AACD,CAJD;;AAMA,IAAM,cAAc,GAAG,SAAjB,cAAiB,GAAY;AACjC,MAAI,UAAU,GAAG,CAAjB;AAEA,EAAA,GAAG,CAAC,OAAD,CAAH,CAAa,OAAb,CAAqB,YAAM;AACzB,IAAA,GAAG,CAAC,OAAD,CAAH,CAAa,OAAb,CAAqB,YAAM;AACzB,MAAA,UAAU,IAAI,CAAd;AAEA,UAAM,OAAO,GAAG,UAAU,KAAK,QAA/B;AAEA,UAAM,IAAI,GAAG,YAAY,8BAEnB,OAAO,GAAG,eAAH,GAAqB,EAFT,mDAIpB,OAAO,GAAG,SAAH,GAAe,UAJF,eAAzB;AAOA,MAAA,IAAI,CAAC,SAAL,GAAiB,UAAU,GAAG,CAA9B;AAEA,MAAA,KAAK,CAAC,IAAN,CAAW,IAAX;AACA,UAAI,OAAJ,EAAa,SAAS,GAAG,IAAZ;AACd,KAhBD;AAiBD,GAlBD,EAHiC,CAuBjC;;AACA,EAAA,SAAS,GAAG,YAAY,4BACH,OADG,4BACoB,OADpB,eAAxB;AAIA,MAAI,CAAC,WAAL,EAAkB,OAAO,CAAC,KAAD,CAAP;AAClB,EAAA,KAAK,CAAC,OAAN,CAAc,UAAC,IAAD;AAAA,WAAU,SAAS,CAAC,WAAV,CAAsB,IAAtB,CAAV;AAAA,GAAd;AACD,CA9BD;;AAiCA,IAAM,WAAW,GAAG,SAAd,WAAc,GAAY;AAC9B,EAAA,cAAc;AACd,EAAA,QAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,SAA1B;AACD,CAHD;;AAKA,IAAM,eAAe,GAAG,SAAlB,eAAkB,GAAW;AACjC,SAAO,KAAK,CAAC,KAAN,CAAY,UAAA,IAAI;AAAA,WAAI,KAAK,CAAC,OAAN,CAAc,IAAd,MAAwB,IAAI,CAAC,SAAjC;AAAA,GAAhB,CAAP;AACD,CAFD,C,CAIA;;;AACA,IAAM,MAAM,GAAG,SAAT,MAAS,CAAA,CAAC;AAAA,SAAI,IAAI,CAAC,IAAL,CAAU,CAAC,CAAC,GAAG,CAAL,IAAU,OAApB,CAAJ;AAAA,CAAhB;;AACA,IAAM,MAAM,GAAG,SAAT,MAAS,CAAA,CAAC;AAAA,SAAK,CAAC,GAAG,OAAL,GAAgB,CAApB;AAAA,CAAhB;;AACA,IAAM,gBAAgB,GAAG,SAAnB,gBAAmB,GAAW;AAClC,MAAM,YAAY,GAAG,EAArB;AACA,MAAM,CAAC,GAAG,KAAK,CAAC,OAAN,CAAc,SAAd,CAAV;AAEA,MAAM,GAAG,GAAG,MAAM,CAAC,CAAD,CAAlB;AACA,MAAI,GAAG,KAAK,CAAZ,EAAe,YAAY,CAAC,IAAb,CAAkB,CAAC,GAAG,OAAtB,EALmB,CAKa;;AAC/C,MAAI,GAAG,KAAK,OAAZ,EAAqB,YAAY,CAAC,IAAb,CAAkB,CAAC,GAAG,OAAtB,EANa,CAMmB;;AAErD,MAAM,GAAG,GAAG,MAAM,CAAC,CAAD,CAAlB;AACA,MAAI,GAAG,KAAK,CAAZ,EAAe,YAAY,CAAC,IAAb,CAAkB,CAAC,GAAG,CAAtB,EATmB,CASO;;AACzC,MAAI,GAAG,KAAK,OAAZ,EAAqB,YAAY,CAAC,IAAb,CAAkB,CAAC,GAAG,CAAtB,EAVa,CAUa;;AAE/C,EAAA,SAAS,GAAG,YAAY,CAAC,GAAb,CAAiB,UAAA,EAAE;AAAA,WAAI,KAAK,CAAC,EAAD,CAAT;AAAA,GAAnB,CAAZ;AACD,CAbD;;AAeA,IAAM,QAAQ,GAAG,SAAX,QAAW,GAAW;AAC1B,EAAA,QAAQ,CAAC,eAAT,CAAyB,SAAzB,CAAmC,MAAnC,CAA0C,WAA1C,EAAuD,eAAe,EAAtE;AACD,CAFD;;AAIA,IAAM,YAAY,GAAG,SAAf,YAAe,CAAS,IAAT,EAAe,IAAf,EAAqB;AACxC;AACA,MAAI,OAAO,GAAG,IAAI,CAAC,UAAnB;AACA,MAAI,KAAK,GAAG,IAAI,CAAC,WAAjB;;AACA,MAAI,KAAK,KAAK,IAAd,EAAoB;AAChB,IAAA,OAAO,CAAC,YAAR,CAAqB,IAArB,EAA2B,IAA3B;AACH,GAFD,MAEO;AACH,IAAA,IAAI,CAAC,UAAL,CAAgB,YAAhB,CAA6B,IAA7B,EAAmC,IAAnC;;AACA,QAAI,KAAJ,EAAW;AACP,MAAA,OAAO,CAAC,YAAR,CAAqB,IAArB,EAA2B,KAA3B;AACH,KAFD,MAEO;AACH,MAAA,OAAO,CAAC,WAAR,CAAoB,IAApB;AACH;AACJ;;AAED,EAAA,KAAK,GAAG,KAAK,CAAC,IAAN,CAAW,IAAI,CAAC,UAAL,CAAgB,QAA3B,CAAR;AACA,EAAA,QAAQ;AACT,CAjBD;;AAmBA,IAAM,WAAW,GAAG,SAAd,WAAc,GAAW;AAC7B,EAAA,OAAO,CAAC,GAAR,CAAY,aAAZ,EAA2B,gBAAgB,EAA3C,EAA+C,SAA/C;AACA,EAAA,SAAS,CAAC,OAAV,CAAkB,UAAA,IAAI,EAAI;AACxB,IAAA,IAAI,CAAC,gBAAL,CAAsB,OAAtB,EAA+B,WAA/B,EAA4C,KAA5C;AACA,IAAA,IAAI,CAAC,SAAL,CAAe,GAAf,CAAmB,UAAnB;AACA,IAAA,IAAI,CAAC,QAAL,GAAgB,CAAhB;AACD,GAJD;AAKA,EAAA,QAAQ;AACT,CARD;;AAUA,IAAM,YAAY,GAAG,SAAf,YAAe,GAAW;AAC9B,EAAA,OAAO,CAAC,GAAR,CAAY,cAAZ,EAA4B,SAA5B;AACA,EAAA,SAAS,CAAC,OAAV,CAAkB,UAAA,IAAI,EAAI;AACxB,IAAA,IAAI,CAAC,mBAAL,CAAyB,OAAzB,EAAkC,WAAlC,EAA+C,KAA/C;AACA,IAAA,IAAI,CAAC,SAAL,CAAe,MAAf,CAAsB,UAAtB;AACA,IAAA,IAAI,CAAC,QAAL,GAAgB,CAAC,CAAjB;AACD,GAJD;AAKD,CAPD;;AASA,IAAM,WAAW,GAAG,SAAd,WAAc,CAAS,KAAT,EAAgB;AAClC,EAAA,YAAY;AACZ,EAAA,YAAY,CAAC,KAAK,CAAC,MAAP,EAAe,SAAf,CAAZ;AACA,EAAA,WAAW;AACZ,CAJD;;AAMA,IAAM,IAAI,GAAG,SAAP,IAAO,CAAU,IAAV,EAAgB,IAAhB,EAAsB,MAAtB,EAA8B;AACzC,EAAA,OAAO,GAAG,IAAV;AACA,EAAA,OAAO,GAAG,IAAV;AACA,EAAA,QAAQ,GAAG,IAAI,GAAG,IAAlB;AACA,EAAA,WAAW,GAAG,MAAd;AAEA,EAAA,WAAW;AACX,EAAA,WAAW;AACZ,CARD;;eAUe,I;;;;;;ACvJf;;;;AAEA,IAAM,IAAI,GAAG,SAAP,IAAO,GAAY;AACvB,0BAAO,CAAP,EAAU,CAAV,EADuB,CAEvB;AACA;AACD,CAJD;;AAMA,IAAI","file":"script.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","let numRows;\nlet numCols;\nlet numCells;\n\nlet container;\nlet cells = [];\nlet adjacents = [];\nlet blankCell;\n\nlet startSolved;\n\n// UTILS:\n// create 'undefined' arrays to loop/map over\nconst arr = (length) => Array.from({ length });\n\n// shuffle children - better than usual method:\n// https://medium.com/@nitinpatel_20236/how-to-shuffle-correctly-shuffle-an-array-in-javascript-15ea3f84bfb\nconst shuffle = (array) => {\n  for (let i = array.length - 1; i > 0; i -= 1) {\n    const j = Math.floor(Math.random() * i);\n    const temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n  return array;\n};\n// create element from html string\nconst strToElement = (htmlStr) => {\n  const template = document.createElement(\"template\");\n  template.innerHTML = htmlStr;\n  return template.content.firstElementChild;\n};\n\nconst createElements = function () {\n  let cellNumber = 0;\n\n  arr(numRows).forEach(() => {\n    arr(numCols).forEach(() => {\n      cellNumber += 1;\n      \n      const isBlank = cellNumber === numCells;\n\n      const cell = strToElement(\n        `<button\n          ${isBlank ? 'class=\"blank\"' : \"\"}\n          tabindex=\"-1\"\n        >${isBlank ? \"(blank)\" : cellNumber}</button>`\n      );\n\n      cell.origIndex = cellNumber - 1;\n\n      cells.push(cell);\n      if (isBlank) blankCell = cell;\n    });\n  });\n\n  // shuffle cells and append as children to our container\n  container = strToElement(\n    `<div data-rows=\"${numRows}\" data-cols=\"${numCols}\"></div>`\n  );\n\n  if (!startSolved) shuffle(cells);\n  cells.forEach((cell) => container.appendChild(cell));\n};\n\n\nconst addElements = function () {\n  createElements();\n  document.body.appendChild(container);\n};\n\nconst cellsInSequence = function() {\n  return cells.every(cell => cells.indexOf(cell) === cell.origIndex);\n};\n\n// math utils for position...\nconst rowNum = i => Math.ceil((i + 1) / numCols);\nconst colNum = i => (i % numCols) + 1;\nconst getAdjacentCells = function() {\n  const adjacentInds = [];\n  const i = cells.indexOf(blankCell);\n\n  const row = rowNum(i);\n  if (row !== 1) adjacentInds.push(i - numCols); // cell above if not first row\n  if (row !== numRows) adjacentInds.push(i + numCols); // cell below if not last row\n  \n  const col = colNum(i);\n  if (col !== 1) adjacentInds.push(i - 1); // cell before if not first col\n  if (col !== numCols) adjacentInds.push(i + 1); // cell after if not last col\n\n  adjacents = adjacentInds.map(ai => cells[ai]);\n};\n\nconst isSolved = function() {\n  document.documentElement.classList.toggle('is-solved', cellsInSequence());\n};\n\nconst swapElements = function(obj1, obj2) {\n  // taken from https://stackoverflow.com/questions/10716986/swap-two-html-elements-and-preserve-event-listeners-on-them/10717422#10717422 to save time:\n  var parent2 = obj2.parentNode;\n  var next2 = obj2.nextSibling;\n  if (next2 === obj1) {\n      parent2.insertBefore(obj1, obj2);\n  } else {\n      obj1.parentNode.insertBefore(obj2, obj1);\n      if (next2) {\n          parent2.insertBefore(obj1, next2);\n      } else {\n          parent2.appendChild(obj1);\n      }\n  }\n\n  cells = Array.from(obj2.parentNode.children);\n  isSolved();\n}\n\nconst adjacentsOn = function() {\n  console.log('adjacentsOn', getAdjacentCells(), adjacents);\n  adjacents.forEach(cell => {\n    cell.addEventListener('click', onCellClick, false);\n    cell.classList.add('adjacent');\n    cell.tabIndex = 0;\n  });\n  isSolved();\n};\n\nconst adjacentsOff = function() {\n  console.log('adjacentsOff', adjacents);\n  adjacents.forEach(cell => {\n    cell.removeEventListener('click', onCellClick, false);\n    cell.classList.remove('adjacent');\n    cell.tabIndex = -1;\n  });\n};\n\nconst onCellClick = function(event) {\n  adjacentsOff();\n  swapElements(event.target, blankCell);\n  adjacentsOn();\n};\n\nconst init = function (rows, cols, solved) {\n  numRows = rows;\n  numCols = cols;\n  numCells = rows * cols;\n  startSolved = solved;\n\n  addElements();\n  adjacentsOn();\n};\n\nexport default init;\n","import puzzle from \"./puzzle\";\n\nconst init = function () {\n  puzzle(4, 4);\n  // supports 2->4 cols/rows\n  // danger - small numbers might make some sequences impossible to arrange to\n};\n\ninit();\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9wdXp6bGUuanMiLCJzcmMvc2NyaXB0cy9zY3JpcHQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7QUNBQSxJQUFJLE9BQUo7QUFDQSxJQUFJLE9BQUo7QUFDQSxJQUFJLFFBQUo7QUFFQSxJQUFJLFNBQUo7QUFDQSxJQUFJLEtBQUssR0FBRyxFQUFaO0FBQ0EsSUFBSSxTQUFTLEdBQUcsRUFBaEI7QUFDQSxJQUFJLFNBQUo7QUFFQSxJQUFJLFdBQUosQyxDQUVBO0FBQ0E7O0FBQ0EsSUFBTSxHQUFHLEdBQUcsU0FBTixHQUFNLENBQUMsTUFBRDtBQUFBLFNBQVksS0FBSyxDQUFDLElBQU4sQ0FBVztBQUFFLElBQUEsTUFBTSxFQUFOO0FBQUYsR0FBWCxDQUFaO0FBQUEsQ0FBWixDLENBRUE7QUFDQTs7O0FBQ0EsSUFBTSxPQUFPLEdBQUcsU0FBVixPQUFVLENBQUMsS0FBRCxFQUFXO0FBQ3pCLE9BQUssSUFBSSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU4sR0FBZSxDQUE1QixFQUErQixDQUFDLEdBQUcsQ0FBbkMsRUFBc0MsQ0FBQyxJQUFJLENBQTNDLEVBQThDO0FBQzVDLFFBQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxLQUFMLENBQVcsSUFBSSxDQUFDLE1BQUwsS0FBZ0IsQ0FBM0IsQ0FBVjtBQUNBLFFBQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxDQUFELENBQWxCO0FBQ0EsSUFBQSxLQUFLLENBQUMsQ0FBRCxDQUFMLEdBQVcsS0FBSyxDQUFDLENBQUQsQ0FBaEI7QUFDQSxJQUFBLEtBQUssQ0FBQyxDQUFELENBQUwsR0FBVyxJQUFYO0FBQ0Q7O0FBQ0QsU0FBTyxLQUFQO0FBQ0QsQ0FSRCxDLENBU0E7OztBQUNBLElBQU0sWUFBWSxHQUFHLFNBQWYsWUFBZSxDQUFDLE9BQUQsRUFBYTtBQUNoQyxNQUFNLFFBQVEsR0FBRyxRQUFRLENB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UCxJQUFPLEdBQVk7QUFDdkIsMEJBQU8sQ0FBUCxFQUFVLENBQVYsRUFEdUIsQ0FFdkI7QUFDQTtBQUNELENBSkQ7O0FBTUEsSUFBSSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImxldCBudW1Sb3dzO1xubGV0IG51bUNvbHM7XG5sZXQgbnVtQ2VsbHM7XG5cbmxldCBjb250YWluZXI7XG5sZXQgY2VsbHMgPSBbXTtcbmxldCBhZGphY2VudHMgPSBbXTtcbmxldCBibGFua0NlbGw7XG5cbmxldCBzdGFydFNvbHZlZDtcblxuLy8gVVRJTFM6XG4vLyBjcmVhdGUgJ3VuZGVmaW5lZCcgYXJyYXlzIHRvIGxvb3AvbWFwIG92ZXJcbmNvbnN0IGFyciA9IChsZW5ndGgpID0+IEFycmF5LmZyb20oeyBsZW5ndGggfSk7XG5cbi8vIHNodWZmbGUgY2hpbGRyZW4gLSBiZXR0ZXIgdGhhbiB1c3VhbCBtZXRob2Q6XG4vLyBodHRwczovL21lZGl1bS5jb20vQG5pdGlucGF0ZWxfMjAyMzYvaG93LXRvLXNodWZmbGUtY29ycmVjdGx5LXNodWZmbGUtYW4tYXJyYXktaW4tamF2YXNjcmlwdC0xNWVhM2Y4NGJmYlxuY29uc3Qgc2h1ZmZsZSA9IChhcnJheSkgPT4ge1xuICBmb3IgKGxldCBpID0gYXJyYXkubGVuZ3RoIC0gMTsgaSA+IDA7IGkgLT0gMSkge1xuICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBpKTtcbiAgICBjb25zdCB0ZW1wID0gYXJyYXlbaV07XG4gICAgYXJyYXlbaV0gPSBhcnJheVtqXTtcbiAgICBhcnJheVtqXSA9IHRlbXA7XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufTtcbi8vIGNyZWF0ZSBlbGVtZW50IGZyb20gaHRtbCBzdHJpbmdcbmNvbnN0IHN0clRvRWxlbWVudCA9IChodG1sU3RyKSA9PiB7XG4gIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICB0ZW1wbGF0ZS5pbm5lckhUTUwgPSBodG1sU3RyO1xuICByZXR1cm4gdGVtcGxhdGUuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZDtcbn07XG5cbmNvbnN0IGNyZWF0ZUVsZW1lbnRzID0gZnVuY3Rpb24gKCkge1xuICBsZXQgY2VsbE51bWJlciA9IDA7XG5cbiAgYXJyKG51bVJvd3MpLmZvckVhY2goKCkgPT4ge1xuICAgIGFycihudW1Db2xzKS5mb3JFYWNoKCgpID0+IHtcbiAgICAgIGNlbGxOdW1iZXIgKz0gMTtcbiAgICAgIFxuICAgICAgY29uc3QgaXNCbGFuayA9IGNlbGxOdW1iZXIgPT09IG51bUNlbGxzO1xuXG4gICAgICBjb25zdCBjZWxsID0gc3RyVG9FbGVtZW50KFxuICAgICAgICBgPGJ1dHRvblxuICAgICAgICAgICR7aXNCbGFuayA/ICdjbGFzcz1cImJsYW5rXCInIDogXCJcIn1cbiAgICAgICAgICB0YWJpbmRleD1cIi0xXCJcbiAgICAgICAgPiR7aXNCbGFuayA/IFwiKGJsYW5rKVwiIDogY2VsbE51bWJlcn08L2J1dHRvbj5gXG4gICAgICApO1xuXG4gICAgICBjZWxsLm9yaWdJbmRleCA9IGNlbGxOdW1iZXIgLSAxO1xuXG4gICAgICBjZWxscy5wdXNoKGNlbGwpO1xuICAgICAgaWYgKGlzQmxhbmspIGJsYW5rQ2VsbCA9IGNlbGw7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIHNodWZmbGUgY2VsbHMgYW5kIGFwcGVuZCBhcyBjaGlsZHJlbiB0byBvdXIgY29udGFpbmVyXG4gIGNvbnRhaW5lciA9IHN0clRvRWxlbWVudChcbiAgICBgPGRpdiBkYXRhLXJvd3M9XCIke251bVJvd3N9XCIgZGF0YS1jb2xzPVwiJHtudW1Db2xzfVwiPjwvZGl2PmBcbiAgKTtcblxuICBpZiAoIXN0YXJ0U29sdmVkKSBzaHVmZmxlKGNlbGxzKTtcbiAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4gY29udGFpbmVyLmFwcGVuZENoaWxkKGNlbGwpKTtcbn07XG5cblxuY29uc3QgYWRkRWxlbWVudHMgPSBmdW5jdGlvbiAoKSB7XG4gIGNyZWF0ZUVsZW1lbnRzKCk7XG4gIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTtcbn07XG5cbmNvbnN0IGNlbGxzSW5TZXF1ZW5jZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gY2VsbHMuZXZlcnkoY2VsbCA9PiBjZWxscy5pbmRleE9mKGNlbGwpID09PSBjZWxsLm9yaWdJbmRleCk7XG59O1xuXG4vLyBtYXRoIHV0aWxzIGZvciBwb3NpdGlvbi4uLlxuY29uc3Qgcm93TnVtID0gaSA9PiBNYXRoLmNlaWwoKGkgKyAxKSAvIG51bUNvbHMpO1xuY29uc3QgY29sTnVtID0gaSA9PiAoaSAlIG51bUNvbHMpICsgMTtcbmNvbnN0IGdldEFkamFjZW50Q2VsbHMgPSBmdW5jdGlvbigpIHtcbiAgY29uc3QgYWRqYWNlbnRJbmRzID0gW107XG4gIGNvbnN0IGkgPSBjZWxscy5pbmRleE9mKGJsYW5rQ2VsbCk7XG5cbiAgY29uc3Qgcm93ID0gcm93TnVtKGkpO1xuICBpZiAocm93ICE9PSAxKSBhZGphY2VudEluZHMucHVzaChpIC0gbnVtQ29scyk7IC8vIGNlbGwgYWJvdmUgaWYgbm90IGZpcnN0IHJvd1xuICBpZiAocm93ICE9PSBudW1Sb3dzKSBhZGphY2VudEluZHMucHVzaChpICsgbnVtQ29scyk7IC8vIGNlbGwgYmVsb3cgaWYgbm90IGxhc3Qgcm93XG4gIFxuICBjb25zdCBjb2wgPSBjb2xOdW0oaSk7XG4gIGlmIChjb2wgIT09IDEpIGFkamFjZW50SW5kcy5wdXNoKGkgLSAxKTsgLy8gY2VsbCBiZWZvcmUgaWYgbm90IGZpcnN0IGNvbFxuICBpZiAoY29sICE9PSBudW1Db2xzKSBhZGphY2VudEluZHMucHVzaChpICsgMSk7IC8vIGNlbGwgYWZ0ZXIgaWYgbm90IGxhc3QgY29sXG5cbiAgYWRqYWNlbnRzID0gYWRqYWNlbnRJbmRzLm1hcChhaSA9PiBjZWxsc1thaV0pO1xufTtcblxuY29uc3QgaXNTb2x2ZWQgPSBmdW5jdGlvbigpIHtcbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2lzLXNvbHZlZCcsIGNlbGxzSW5TZXF1ZW5jZSgpKTtcbn07XG5cbmNvbnN0IHN3YXBFbGVtZW50cyA9IGZ1bmN0aW9uKG9iajEsIG9iajIpIHtcbiAgLy8gdGFrZW4gZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDcxNjk4Ni9zd2FwLXR3by1odG1sLWVsZW1lbnRzLWFuZC1wcmVzZXJ2ZS1ldmVudC1saXN0ZW5lcnMtb24tdGhlbS8xMDcxNzQyMiMxMDcxNzQyMiB0byBzYXZlIHRpbWU6XG4gIHZhciBwYXJlbnQyID0gb2JqMi5wYXJlbnROb2RlO1xuICB2YXIgbmV4dDIgPSBvYmoyLm5leHRTaWJsaW5nO1xuICBpZiAobmV4dDIgPT09IG9iajEpIHtcbiAgICAgIHBhcmVudDIuaW5zZXJ0QmVmb3JlKG9iajEsIG9iajIpO1xuICB9IGVsc2Uge1xuICAgICAgb2JqMS5wYXJlbnROb2RlLmluc2VydEJlZm9yZShvYmoyLCBvYmoxKTtcbiAgICAgIGlmIChuZXh0Mikge1xuICAgICAgICAgIHBhcmVudDIuaW5zZXJ0QmVmb3JlKG9iajEsIG5leHQyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGFyZW50Mi5hcHBlbmRDaGlsZChvYmoxKTtcbiAgICAgIH1cbiAgfVxuXG4gIGNlbGxzID0gQXJyYXkuZnJvbShvYmoyLnBhcmVudE5vZGUuY2hpbGRyZW4pO1xuICBpc1NvbHZlZCgpO1xufVxuXG5jb25zdCBhZGphY2VudHNPbiA9IGZ1bmN0aW9uKCkge1xuICBjb25zb2xlLmxvZygnYWRqYWNlbnRzT24nLCBnZXRBZGphY2VudENlbGxzKCksIGFkamFjZW50cyk7XG4gIGFkamFjZW50cy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNlbGxDbGljaywgZmFsc2UpO1xuICAgIGNlbGwuY2xhc3NMaXN0LmFkZCgnYWRqYWNlbnQnKTtcbiAgICBjZWxsLnRhYkluZGV4ID0gMDtcbiAgfSk7XG4gIGlzU29sdmVkKCk7XG59O1xuXG5jb25zdCBhZGphY2VudHNPZmYgPSBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJ2FkamFjZW50c09mZicsIGFkamFjZW50cyk7XG4gIGFkamFjZW50cy5mb3JFYWNoKGNlbGwgPT4ge1xuICAgIGNlbGwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNlbGxDbGljaywgZmFsc2UpO1xuICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZSgnYWRqYWNlbnQnKTtcbiAgICBjZWxsLnRhYkluZGV4ID0gLTE7XG4gIH0pO1xufTtcblxuY29uc3Qgb25DZWxsQ2xpY2sgPSBmdW5jdGlvbihldmVudCkge1xuICBhZGphY2VudHNPZmYoKTtcbiAgc3dhcEVsZW1lbnRzKGV2ZW50LnRhcmdldCwgYmxhbmtDZWxsKTtcbiAgYWRqYWNlbnRzT24oKTtcbn07XG5cbmNvbnN0IGluaXQgPSBmdW5jdGlvbiAocm93cywgY29scywgc29sdmVkKSB7XG4gIG51bVJvd3MgPSByb3dzO1xuICBudW1Db2xzID0gY29scztcbiAgbnVtQ2VsbHMgPSByb3dzICogY29scztcbiAgc3RhcnRTb2x2ZWQgPSBzb2x2ZWQ7XG5cbiAgYWRkRWxlbWVudHMoKTtcbiAgYWRqYWNlbnRzT24oKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGluaXQ7XG4iLCJpbXBvcnQgcHV6emxlIGZyb20gXCIuL3B1enpsZVwiO1xuXG5jb25zdCBpbml0ID0gZnVuY3Rpb24gKCkge1xuICBwdXp6bGUoNCwgNCk7XG4gIC8vIHN1cHBvcnRzIDItPjQgY29scy9yb3dzXG4gIC8vIGRhbmdlciAtIHNtYWxsIG51bWJlcnMgbWlnaHQgbWFrZSBzb21lIHNlcXVlbmNlcyBpbXBvc3NpYmxlIHRvIGFycmFuZ2UgdG9cbn07XG5cbmluaXQoKTtcbiJdfQ=="}